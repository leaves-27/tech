# 版本控制系统(VCS)的前世今生
版本控制系统一种记录文件内容的变化，以便将来查阅特定版本修订情况的系统。其又分为本地版本控制和集中版本控制系统(CVCS)
1.本地版本控制系统(LVCS): 
  解决的问题是：在保存项目的不同版本时，容易出现出错导致版本混淆或找不到的问题。
  原理：在硬盘上保存补丁集（补丁是指文件修订前后的变化）；通过应用所有的补丁，可以重新计算出各个版本的文件内容。
  (1)RCS:
2.集中版本控制系统(CVCS): 
  解决的问题是：在不同系统上的开发者如何协同工作的问题。
  原理：由一个单一的集中管理的服务器，保存所有文件的修订版本，而协同工作的人们都通过客户端连到这台服务器，取出最新的文件或者提交更新。
  (1)CVS:
  (2)Subversion: 
  (3)Perforce: 
3.分布式版本控制系统(DVCS): 克隆整个版本库。
  (1)Git:
  (2)Mercurial:
  (3)Bazaar:
  (4)Darcs:

# git的优点
1.直接记录快照，而非差异比较；
2.近乎所有操作都是在本地；
3.git保证完整性：所有的数据在存储前都计算校验和，然后通过校验和来引用。
4.git一般只添加数据。

# 三种状态
1.committed：已提交
2.modified：已修改
3.staged：已暂存

# 三个阶段：
1.版本库：
  (1)文件快照对象
  (2)树对象
  (3)提交对象

2.暂存区：
  git commit: 
    计算每个子目录的哈希值形成一棵树对象，然后在git仓库中保存该对象。并创建提交对象。提交对象包含如下内容：
    (1)暂存快照内容指针：即新对象的id。
    (2)快照产生的相关信息：作者及其联系方式、备注以及快照的父对象的指针。

  获取文件对象的id,获取文件对象的父对象的id,获取提交者信息的id,
3.工作区：
  git add :生成要保存的文件对象的哈希值，然后检查该哈希值是否已经存在。若不存在，则将其加入到暂存区、把改文件对象保存到git仓库中;若存在，则不处理。
# 分支
即是指向某个提交对象的可变指针。

指针的分类：
指向某个提交对象的可变指针
指向某个分支可变指针的的指针
## 分支管理
### git branch:
#### 分支的创建
-b/: 创建新分支
-B:

#### 分支的删除
-d/-delete: 删除
-D: 强制删除

#### 分支的移动或重命名
-m/--move：移动或重命名分支
-M: 强制移动或重命名分支.在已有同名分支时使用

#### 分支的复制
-c/--copy:
-C:

#### 显示当前分支
--show-current
#### 分支的筛选
-a/--all：所有分支
-r/--remotes：远程分支
-l/--list: 

--merged或--no-merged：查看已经合并或未合并某个提交的分支有哪些(没有指明具体提交id，则列出所有提交合并或未合并的分支)
--contains或--no-contains: 查看包含某个提交或不包含某个提交的分支
#### 显示分支的最近提交情况
-v/--verbose: 显示每个头的sha1和提交主题行，以及与上游分支（如果有）的关系.
--v: 显示链接的工作树的路径（如果有的话）和上游分支的名称
#### 本地分支的跟踪信息设置
-t/--trace/--no-track:
-u/--set-upstream-to:
####  分支的描述信息编辑
--edit-description

#### 显示的哈希值以最简短的形式显示
--abbrev或--no-abbrev: 

### 显示分支信息时，显示更少信息
-q/--quiet

### git switch
### git checkout 
### git merge
### 






### 分支的管理经验
master: 稳定分支。
dev: 主题分支。// 多个主题分支要同时在近期进行发布时，应该将其多个主题分支先进行合并到一个新拉取的第三方分支，然后回归测试后，再往线上发布。在发布后，出现严重问题时，应该撤销合并后的发布版本，重新部署稳定版本。接着再核查该问题出现的分支，在该问题不能尽快解决的前提下，单独发布没有出现问题的分支，出现问题的分支等待问题解决后再发布。否则，应该尽可能排队依次进行发布。
daily：日常紧急问题修复分支。

prod环境: 用户机型、服务器配置及其依赖包均为线上环境。过段时间，待其稳定后将其自动合并到稳定分支。
preview环境: 用户机型、服务器配置及其依赖包均为预发环境。
test环境：用户机型、服务器配置及其依赖包均为测试环境。
dev环境: 用户机型、服务器配置及其依赖包均为开发环境。多个项目成员开发完成后统一合并到该分支，然后进行测试回归。

# 项目和分支的思考
1.项目业务太复杂的项目应该进行拆分，使各个业务保持为独立项目，而其他部分则作为依赖库或包来处理(该共享依赖库或包维护时，应由熟悉多个业务的第三方团队成员来维护<若没有第三方团队成员应该为团队中最熟悉多方业务且技术实力比较强的团队成员来维护>)。但对于共享的业务，应该由熟悉所有业务的第三方独立团队来维护，避免任何不懂两方业务的一方维护时出错(若没有第三方团队成员应该为团队中最熟悉多方业务且技术实力比较强的团队成员来维护)。
2.拆分的项目之间的共享部分或库应该足够稳定(即最小化修改)，否则，可能出现频繁的修改，由于时间仓促，考虑不周对任何一方业务模块不支持的问题或兼容不好的问题。

# 撤销命令
git reset\git revert\git restore

# 参考文献
git: https://git-scm.com/book/zh/v2/%E8%B5%B7%E6%AD%A5-Git-%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F


