# 采用虚拟DOM的原因：

1.可以在效率和可维护性之间达到一个平衡。很多时候手工优化DOM确实会比virtual dom效率高，对于比较简单的dom结构用手工优化没有问题，但当页面结构很庞大，结构很复杂时，手工优化会花去大量时间，而且可维护性也不高，不能保证每个人都有手工优化的能力。至此，virtual dom的解决方案应运而生，virtual dom很多时候都不是最优的操作，但它具有普适性，在效率和可维护性之间达到一个平衡。

2.提供了一个中间层。使得可以使用js去写ui，ios安卓之类的负责渲染，就像reactNative一样。

# 原理
使用js对象创建了一个真实DOM的副本(因为操作js对象比操作DOM快)，然后对新旧副本同级进行比较(具体比较策略见下)，然后对真实DOM进行更新，依次递归，最终实现整个DOM树的更新。

# 同级的比较策略
1.优先比较新副本的头部节点与老副本的头部节点：若是同类型节点，则不移动真实DOM，并且将对应的新旧副本进行标记，将新旧副本的指针进行移动(头部的后移，尾部的迁移)。
2.然后比较新副本的尾部节点与老副本的尾部节点：同1。
3.再然后比较新副本的尾部节点与老副本的头部节点：若是同类型，则位置很明确不用查找，移动真实DOM,并进行相关标记、移动指针即可。
4.接着比较新副本的头部节点与老副本的尾部节点：同3。
5.接着将其与老副本的节点一一进行比较：若老副本中找不到同类型节点，则在老副本指针所在节点前新增一个真实DOM节点，然后标记新副本节点并移动相关指针。
6.然后依次循环，直到新副本头尾指针相遇。若头尾指针相遇时，老副本依然有没有处理的节点。且新副本当前指针所在位置的节点跟其他不相同时，则老副本中的剩余节点是要删除的节点。在真实DOM中删除即可。
7.至此，同级节点比较过程结束，进入下一级节点节点比较，然后依次循环，直到整个DOM树更新。

详情参见:
  https://blog.csdn.net/m6i37jk/article/details/78140159
  https://github.com/aooy/blog/issues/2

